import{r as v,c as s,o as u,i as d,a as g,t as f}from"./BWpRghuz.js";const p=()=>({formatPhone:r=>{console.log("Input to formatPhone:",r);let e=r.replace(/\D/g,"");if(console.log("After removing non-digits:",e),e.length>11&&(e=e.slice(0,11)),e.length===0)return"";e.startsWith("8")&&(e="7"+e.slice(1)),e.startsWith("7")||(e="7"+e,e.length>11&&(e=e.slice(0,11)));let t="+7";return e.length>1&&(t+=" ("+e.slice(1,4)),e.length>=5&&(t+=") "+e.slice(4,7)),e.length>=8&&(t+="-"+e.slice(7,9)),e.length>=10&&(t+="-"+e.slice(9,11)),console.log("Final formatted:",t),t}}),_={class:"form-group"},P={key:0},y=["value","placeholder"],V={key:1,class:"error"},x={__name:"PhoneInput",props:{modelValue:String,label:{type:String,default:"Телефон"},placeholder:{type:String,default:"+7 (___) ___-__-__"},required:{type:Boolean,default:!0}},emits:["update:modelValue","validation"],setup(o,{expose:r,emit:e}){const{formatPhone:t}=p(),c=o,n=e,l=v(""),h=a=>{const i=t(a.target.value);n("update:modelValue",i),a.target.value=i,l.value&&(l.value="",n("validation",!0))},m=()=>{const a=c.modelValue?.replace(/\D/g,"")||"";return c.required&&!a?(l.value="Укажите телефон",n("validation",!1),!1):a&&a.length<11?(l.value="Некорректный номер",n("validation",!1),!1):(l.value="",n("validation",!0),!0)};return r({validate:()=>m()}),(a,i)=>(u(),s("div",_,[o.label?(u(),s("label",P,f(o.label),1)):d("",!0),g("input",{type:"text",value:o.modelValue,placeholder:o.placeholder,onInput:h},null,40,y),l.value?(u(),s("div",V,f(l.value),1)):d("",!0)]))}};export{x as _,p as u};
