import{_ as C,p as I,q as N,r as R,s as _,k as m,c as i,a as s,i as p,t as o,u as t,o as d}from"./BWpRghuz.js";import{u as v}from"./D0YskpLl.js";const $={class:"lead-detail-page"},A={class:"page-header"},E={key:0,class:"loading"},G={key:1,class:"error"},L={key:2,class:"lead-details"},S={class:"detail-card"},U={class:"detail-grid"},V={class:"detail-item"},q={class:"detail-item"},F={class:"detail-item"},O={class:"detail-item"},Q={class:"detail-item"},W={key:0,class:"detail-card"},j={class:"message-content"},z={__name:"[id]",async setup(H){let l,r;const g=I(),b=N(),k=R(g.params.id),{data:f,pending:h,error:u}=([l,r]=_(()=>v(`/api/leads/${k.value}`,"$rGpil-LuUo")),l=await l,r(),l),a=m(()=>f.value?.lead),{data:y}=([l,r]=_(()=>v("/api/sources","$b4QblIkGWO")),l=await l,r(),l),c=m(()=>y.value?.sources||[]),D=n=>{if(!c.value.length||!n)return"-";const e=c.value.find(B=>B.id===n);return e?e.name:"-"},w=n=>n?new Date(n).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",x=()=>{b.back()};return(n,e)=>(d(),i("div",$,[s("div",A,[s("button",{onClick:x,class:"back-btn"},"← Назад"),s("h1",null,"Заявка #"+o(t(a)?.id),1)]),t(h)?(d(),i("div",E,"Загрузка...")):t(u)?(d(),i("div",G,"Ошибка: "+o(t(u).message),1)):t(a)?(d(),i("div",L,[s("div",S,[e[5]||(e[5]=s("h3",null,"Основная информация",-1)),s("div",U,[s("div",V,[e[0]||(e[0]=s("label",null,"Имя:",-1)),s("span",null,o(t(a).name||"-"),1)]),s("div",q,[e[1]||(e[1]=s("label",null,"Email:",-1)),s("span",null,o(t(a).email||"-"),1)]),s("div",F,[e[2]||(e[2]=s("label",null,"Телефон:",-1)),s("span",null,o(t(a).phone||"-"),1)]),s("div",O,[e[3]||(e[3]=s("label",null,"Источник:",-1)),s("span",null,o(D(t(a).sourceId)||"-"),1)]),s("div",Q,[e[4]||(e[4]=s("label",null,"Дата создания:",-1)),s("span",null,o(w(t(a).createdAt)),1)])])]),t(a).message?(d(),i("div",W,[e[6]||(e[6]=s("h3",null,"Сообщение",-1)),s("p",j,o(t(a).message),1)])):p("",!0)])):p("",!0)]))}},M=C(z,[["__scopeId","data-v-b81bb57a"]]);export{M as default};
