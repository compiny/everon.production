import{_ as h}from"./DKYKsfuH.js";import{_ as y,r as o,f as V,c as d,o as p,a as l,g,h as x,b as k,i as I,v as P,n as v,t as S}from"./BWpRghuz.js";const T={id:"callback",class:"bg"},w={class:"container"},D=["placeholder"],B=["disabled"],C={__name:"CallbackForm",setup(F){const s=o({name:"",phone:"",source_id:3}),n=o({name:"",phone:""}),u=o(!1),t=o(null),i=o();let m=null;V(t,a=>{clearTimeout(m),a&&(m=setTimeout(()=>{t.value=null},3e3))});const c=a=>(n.value[a]="",s.value.name.trim()?!0:(n.value.name="Укажите имя",!1)),f=()=>{let a=!0;return c("name")||(a=!1),i.value?.validate()||(a=!1),a},_=async()=>{if(f()){u.value=!0,t.value=null;try{const a=s.value.phone.replace(/\D/g,""),e=await $fetch("/api/leads",{method:"POST",body:{name:s.value.name,phone:a,sourceId:s.value.source_id}});t.value={type:"success",text:"Спасибо! Мы скоро вам перезвоним."},s.value.name="",s.value.phone="",n.value.name=""}catch(a){console.error("Ошибка отправки:",a),t.value={type:"error",text:"Произошла ошибка. Пожалуйста, попробуйте позже."}}finally{u.value=!1}}};return(a,e)=>{const b=h;return p(),d("div",T,[l("div",w,[e[2]||(e[2]=l("div",{class:"title"},[l("div",null,"Остались"),l("div",null,"вопросы?")],-1)),e[3]||(e[3]=l("div",{class:"operator"},null,-1)),e[4]||(e[4]=l("p",null,"Если у вас есть вопросы, наш специалист ответит на все вопросы по телефону",-1)),e[5]||(e[5]=l("p",{class:"numb"},"+7 953 861 79 20",-1)),e[6]||(e[6]=l("p",null,"Или оставьте свои данные и наш специалист свяжется с вами",-1)),l("form",{onSubmit:g(_,["prevent"]),class:"callback-form"},[x(l("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>s.value.name=r),type:"text",id:"name",placeholder:n.value.name?n.value.name:"Ваше имя",class:v({"input-error":n.value.name})},null,10,D),[[P,s.value.name]]),k(b,{modelValue:s.value.phone,"onUpdate:modelValue":e[1]||(e[1]=r=>s.value.phone=r),ref_key:"phoneInputRef",ref:i,label:null,placeholder:"Телефон"},null,8,["modelValue"]),l("button",{type:"submit",disabled:u.value}," Заказать обратный звонок ",8,B),t.value?(p(),d("div",{key:0,class:v(["message",t.value.type,t.value.type==="success"?"success-message":""])},S(t.value.text),3)):I("",!0)],32)]),e[7]||(e[7]=l("div",{class:"operator-mob"},null,-1))])}}},R=y(C,[["__scopeId","data-v-470eb950"]]);export{R as _};
