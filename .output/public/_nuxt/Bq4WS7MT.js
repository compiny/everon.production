import{_ as F,a as E}from"./D-0WV_IZ.js";import{a as M,_ as P}from"./Be6zGHtV.js";import{_ as R}from"./DKnWWiq_.js";import{_ as T,p as C,r as d,s as D,I as L,k as y,c as l,G as O,i as U,u as o,a as e,t as u,b as _,F as f,y as h,d as H,z as q,o as n}from"./BWpRghuz.js";import{u as z}from"./D0YskpLl.js";import{a as G}from"./CBNmp-hA.js";import"./DKYKsfuH.js";const J={key:0,class:"container"},Q={class:"flex content"},W={class:"content_img"},j=["src","alt"],K={class:"slider"},X={class:"description"},Y={class:"flex between"},Z={key:0,class:"properties"},tt={class:"property-label"},et={class:"property-value"},st={key:1,class:"properties"},ot={class:"price"},nt={class:"old-price"},lt={class:"flex between"},at={key:0,class:"striped-table"},rt={class:"t-value"},ut={key:1,class:"striped-table"},it=["innerHTML"],ct={key:3},pt={key:1,class:"container"},dt={key:2,class:"container"},_t={__name:"[productSlug]",async setup(mt){let p,g;const S=C(),t=d(null),b=d(!0);d(null);const m=d(1),$=S.params.productSlug,{data:k,pending:x}=([p,g]=D(()=>z(`/api/products/by-slug/${$}`,"$iQlAWFpaAV")),p=await p,g(),p);L(()=>{k.value&&(t.value=k.value,b.value=x.value)});const I=y(()=>t.value?new Intl.NumberFormat("ru-RU").format(t.value.price):"0"),V=y(()=>{if(!t.value)return"0";const a=Math.round(t.value.price*1.4);return new Intl.NumberFormat("ru-RU").format(a)}),w=y(()=>{if(!t.value)return[];let a=[];if(t.value.mainImage&&a.push({src:t.value.mainImage,alt:t.value.name,caption:"Основное изображение"}),t.value.gallery)try{(typeof t.value.gallery=="string"?JSON.parse(t.value.gallery):t.value.gallery).forEach((r,c)=>{typeof r=="string"?a.push({src:r,alt:`${t.value.name} - изображение ${c+1}`,caption:`Изображение ${c+1}`}):r.src&&a.push({src:r.src,alt:r.alt||`${t.value.name} - изображение ${c+1}`,caption:r.caption||`Изображение ${c+1}`})})}catch(s){console.error("Error parsing gallery:",s)}return a.length===0&&(a=[{src:"/images/product1.png",alt:t.value.name,caption:"Основное изображение"},{src:"/images/product1.2.png",alt:`${t.value.name} - боковой вид`,caption:"Боковой вид"}]),a});return G({title:t.value?.seoTitle||t.value?.name,description:t.value?.seoDescription||`Купить ${t.value?.name} по выгодной цене`}),(a,s)=>{const r=F,c=P,N=M,A=E,B=R;return n(),l(f,null,[o(t)?(n(),l("div",J,[e("h2",null,u(o(t).name),1),e("div",Q,[e("div",W,[s[1]||(s[1]=e("div",{class:"discount"},"40%",-1)),e("img",{src:o(t).mainImage||"/public/images/product.png",class:"product",alt:o(t).name},null,8,j)]),e("div",K,[_(r,{images:o(w)},null,8,["images"])]),e("div",X,[e("div",Y,[e("p",null,"Код товара: "+u(o(t).id),1),_(c)]),s[4]||(s[4]=e("h6",null,"Характеристики",-1)),o(t).attributes&&o(t).attributes.length?(n(),l("div",Z,[(n(!0),l(f,null,h(o(t).attributes,(i,v)=>(n(),l("div",{key:v,class:"property-item"},[e("span",tt,u(i.name)+" —",1),e("span",et,u(i.value),1)]))),128))])):(n(),l("div",st,s[2]||(s[2]=[e("p",null,"Характеристики отсутствуют",-1)]))),s[5]||(s[5]=e("div",{class:"in_stock"}," В наличии ",-1)),e("div",ot,[H(u(o(I))+" ",1),s[3]||(s[3]=e("span",null,"руб.",-1))]),e("div",nt,u(o(V))+" руб.",1),e("div",lt,[_(N,{product:o(t),onSuccess:a.onOrderSuccess},null,8,["product","onSuccess"]),_(A,{modelValue:o(m),"onUpdate:modelValue":s[0]||(s[0]=i=>q(m)?m.value=i:null)},null,8,["modelValue"])])])]),s[8]||(s[8]=e("h3",null,"Характеристики",-1)),o(t).attributes&&o(t).attributes.length?(n(),l("table",at,[e("tbody",null,[(n(!0),l(f,null,h(o(t).attributes,(i,v)=>(n(),l("tr",{key:v},[e("td",null,u(i.name),1),e("td",rt,u(i.value),1)]))),128))])])):(n(),l("table",ut,s[6]||(s[6]=[e("tbody",null,[e("tr",null,[e("td",{colspan:"2"},"Характеристики отсутствуют")])],-1)]))),s[9]||(s[9]=e("h3",null,"Описание",-1)),o(t).description?(n(),l("div",{key:2,innerHTML:o(t).description,class:"product-description"},null,8,it)):(n(),l("div",ct,s[7]||(s[7]=[e("p",null,"Описание товара отсутствует.",-1)])))])):o(b)?(n(),l("div",pt,s[10]||(s[10]=[e("p",null,"Загрузка товара...",-1)]))):(n(),l("div",dt,s[11]||(s[11]=[e("p",null,"Товар не найден",-1)]))),o(t)?(n(),O(B,{key:3})):U("",!0)],64)}}},St=T(_t,[["__scopeId","data-v-1df3ff3c"]]);export{St as default};
